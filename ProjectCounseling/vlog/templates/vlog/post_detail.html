<!DOCTYPE html>
<html lang="ko">
<head>
 <meta charset="UTF-8">
 <title>{{ post.title }}</title>
</head>
<body>


 <h1>{{ post.title }}</h1>
 <p>{{ post.content }}</p>
 <p>
   <small>작성일 : {{ post.created_at }}</small>
   {% if post.author %}
     <br>
     <strong>
         <a href="{% url 'profile_detail' user.username %}">
         <img src="{{ user.profile.image.url }}" alt="profile" width="32" height="32">
         {{ post.author.username }}
         </a>
     </strong>
   {% endif %}
 </p>


 <hr>
 <p><a href="{% url 'post_list' %}">목록</a></p>


 {% if user.is_authenticated and post.author == user %}
   <p>
     <a href="{% url 'post_update' post.pk %}">수정</a>
     <a href="{% url 'post_delete' post.pk %}">삭제</a>
   </p>
 {% endif %}


 <hr>
 <h2>댓글</h2>


 {% if user.is_authenticated %}
   <form method="post">
     {% csrf_token %}


     {% if comment_form.errors %}
       <div>
         <strong>댓글 등록 실패:</strong>
         {{ comment_form.errors }}
       </div>
     {% endif %}


     {{ comment_form.as_p }}
     <button type="submit">댓글 작성</button>
   </form>
 {% else %}
   <p>댓글을 작성하려면 로그인 해주세요</p>
 {% endif %}


 <hr>
 <ul>
   {% for c in comments %}
     <li>
       <strong>{{ c.author.username }}</strong> :
       {{ c.content }}
       <br>
       <small>{{ c.created_at }}</small>


       {% if user.is_authenticated and c.author == user %}
         <br>
         <a href="{% url 'comment_edit' c.pk %}">수정</a>
         <a href="{% url 'comment_delete' c.pk %}">삭제</a>
       {% endif %}
     </li>
   {% empty %}
     <li>댓글이 없습니다.</li>
   {% endfor %}
 </ul>


</body>
</html>




